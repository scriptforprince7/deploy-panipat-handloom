!function(s){"use strict";var r=s("body"),d=s(".page-sidebar"),c=window.minimog.Helpers,m="collapsed",u="sidebar-widgets-collapsible";function t(){"function"==typeof s.fn.selectWoo&&s(".minimog-wp-widget-product-layered-nav-dropdown").each(function(){var e=s(this);e.selectWoo({placeholder:e.data("placeholder"),minimumResultsForSearch:5,width:"100%",allowClear:!e.attr("multiple"),language:{noResults:function(){return $minimog.i18l.noMatchesFound}}}).on("select2:unselecting",function(e){s(this).on("select2:opening.cancelOpen",function(e){e.preventDefault(),s(this).off("select2:opening.cancelOpen")})})})}function g(e,t,n,i){var o=s("#archive-layout-switcher");o.length<=0||0<(o=o.find(".switcher-item[data-columns="+i+"]")).length&&(o.siblings().removeClass("selected"),o.addClass("selected"))}function f(e,t={}){var l=s.extend(!0,{},{loadMore:0,scrollTop:0},t),n=(e=decodeURIComponent(e),l.loadMore||history.pushState({},null,e),s(".shop-load-more-button"));s(document.body).trigger("minimog_getting_product"),s.ajax({url:e,type:"GET",dataType:"html",success:function(e){var n=s(e),e=s("#minimog-main-post"),t=(l.loadMore||e.children(".minimog-grid").children(".grid-item").remove(),n.find("#minimog-main-post .grid-item")),i=(e.MinimogGridLayout("update",t),[".woocommerce-result-count",".woocommerce-pagination",".form-product-price-filter","#active-filters-bar"]);s(".minimog-wp-widget-filter").each(function(){i.push("#"+s(this).attr("id"))});for(let e=0,t=i.length;e<t;e++){var o=i[e],a=s(o);0<a.length&&(a.empty(),0<(o=n.find(o)).length)&&a.html(o.html())}s(document.body).trigger("minimog_get_product_fragments_loaded",[n]),l.scrollTop&&(t=e.offset().top,t-=198,t=Math.max(0,t),s("html, body").animate({scrollTop:t},300)),d.each(function(){var e=s(this);e.hasClass(u)&&e.find(".widget:not(."+m+")").find(".widget-content").stop().slideDown(250)}),s.fn.perfectScrollbar&&!c.isHandheld()&&d.find(".widget-scrollable").each(function(){s(this).find(".widget-content-inner").perfectScrollbar("update")})},beforeSend:function(){l.loadMore?c.setElementHandling(n):c.setBodyHandling()},complete:function(){l.loadMore?c.unsetElementHandling(n):c.setBodyCompleted()}})}s(document).ready(function(){var e,n,i,o,a,l;e=s("#archive-layout-switcher"),n=s(".minimog-main-post"),i="selected",e.on("click",".switcher-item",function(e){e.preventDefault();e=s(this);if(!e.hasClass(i)){e.siblings().removeClass(i),e.addClass(i);var e=e.data("layout"),t={};switch(n.addClass("layout-switching"),e){case"grid-one":t.columns=1,t.disableColumnChange=!0,n.addClass("style-list");break;case"grid-two":t.columns=2,t.disableColumnChange=!1,n.removeClass("style-list");break;case"grid-three":t.columns=3,t.disableColumnChange=!1,n.removeClass("style-list");break;case"grid-four":t.columns=4,t.disableColumnChange=!1,n.removeClass("style-list");break;case"grid-five":t.columns=5,t.disableColumnChange=!1,n.removeClass("style-list")}n.MinimogGridLayout("updateLayout",t),n.on("MinimogGridLayoutResized",function(){n.removeClass("layout-switching")})}}),d.length<=0||(d.find(".widget").each(function(){var e=s(this);if(e.hasClass("widget_block"))return!0;e.children().not(".widget-title, .widgettitle, .widget-instance, .widget-content").wrapAll('<div class="widget-content"><div class="widget-content-inner"></div></div>'),e.hasClass("widget-scrollable")&&s.fn.perfectScrollbar&&!c.isHandheld()&&e.find(".widget-content-inner").perfectScrollbar()}),d.each(function(){var e=s(this);e.hasClass(u)&&e.on("click",".widget-title, .widgettitle",function(e){var t=s(this).closest(".widget");t.hasClass(m)?(t.removeClass(m),t.find(".widget-content").stop().slideDown(250)):(t.addClass(m),t.find(".widget-content").stop().slideUp(250))})})),"infinite"===(l=s(".woocommerce-pagination")).data("type")&&(o=0,(a=s(window)).on("scroll",function(){var e,t=s(this).scrollTop();o<t&&(e=a.height(),e=parseInt(.9*e),l.offset().top+l.outerHeight(!0)-e<=t)&&((e=l.find(".shop-load-more-button")).hasClass("updating-icon")||e.trigger("click")),o=t})),t(),s(document.body).on("MinimogGridLayoutColumnsChange",g),s(document.body).on("click",".minimog-wp-widget-filter .filter-link",function(e){e.preventDefault();var e=s(this),t=e.parent("li"),n=e.closest("ul"),i=e.attr("href");if(n.hasClass("single-choice")){if(t.hasClass("chosen"))return;t.addClass("chosen").siblings().removeClass("chosen")}else e.parent("li").toggleClass("chosen");n=s(this).closest(".page-sidebar");0<n.length&&(r.removeClass("off-sidebar-opened"),n.removeClass("off-sidebar-active"),c.unsetBodyOverflow()),f(i)}),s(document.body).on("click",".js-product-filter-link",function(e){e.preventDefault();e=s(this);e.hasClass("disabled")||f(e.attr("href"))}),s(document.body).on("change",".minimog-wp-widget-product-layered-nav-dropdown",function(){s(this).closest("form").trigger("submit")}),s(document.body).on("submit",".minimog-wp-widget-product-layered-nav-form",function(){var e=s(this),t=e.find(".filter-name"),n=e.find(".filter-query-type"),i=t.val(),e=e.attr("action"),e=c.addUrlParam(e,t.attr("name"),i);return f(e=0<n.length?""===i?c.removeUrlParam(e,n.attr("name")):c.addUrlParam(e,n.attr("name"),n.val()):e),!1}),s(document.body).on("submit",".form-product-price-filter",function(){var e=s(this),t=e.find("#min_price").val(),n=e.find("#max_price").val(),e=e.attr("action"),e=c.addUrlParam(e,"min_price",t);return f(c.addUrlParam(e,"max_price",n)),!1}),s(document.body).on("click",".woocommerce-pagination a.page-numbers",function(e){e.preventDefault(),f(s(this).attr("href"),{scrollTop:1})}),s(document.body).on("click",".shop-load-more-button",function(e){e.preventDefault(),f(s(this).attr("data-url"),{loadMore:1})}),s(document.body).on("change",".js-product-ordering select.orderby",function(){f(c.addUrlParam(window.location.href,"orderby",s(this).val()))})}),s(document.body).on("minimog_get_product_fragments_loaded",function(){t(),s(document.body).trigger("init_price_filter")})}(jQuery);