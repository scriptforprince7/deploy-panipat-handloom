!function(S){"use strict";var $=S("body"),C=window.minimog.Helpers;function T(t,e,i,o,n){n=n.parents(".row-isw-swatch").first();n.hasClass("row-isw-swatch--isw_select")||n.find(".selected-term-name").html(o)}S(document).ready(function(){function t(){S.fn.lightGallery&&e.hasClass("has-light-gallery")&&(e.removeData("lightGallery"),e.lightGallery(window.minimog.LightGallery))}var e,i,o,n,a,l,r,s,c,m,d,g,u,p,h,f;if((e=S(".woo-single-gallery")).length<=0||(!$minimog.isSingle||"product"!==$minimog.postType||"slider"!==$minimogProductSingle.featureStyle&&"slider-02"!==$minimogProductSingle.featureStyle&&"carousel"!==$minimogProductSingle.featureStyle||(r={},e.hasClass("has-thumbs-slider")&&(a=e.find(".minimog-thumbs-swiper").MinimogSwiper(),r={thumbs:{swiper:a,autoScrollOffset:1}}),e.children(".minimog-main-swiper").MinimogSwiper(r)),t(),e.on("minimog_wc_gallery_init_light_gallery",t)),"1"!==$minimogProductSingle.singleProductStickyBar||(i=S("#sticky-product-bar")).length<=0||(a=S(".entry-product form.cart").find(".single_add_to_cart_button"),o=S(".entry-product .entry-summary form.cart"),n=a.offset().top,a=i.outerHeight(),l="showing",$.css("--sticky-atc-bar-height",a+"px"),i.on("click",".sticky-product-bar-close",function(t){t.preventDefault(),i.addClass("hide"),$.css("--sticky-atc-bar-height",0)}),S(window).on("scroll",function(){S(this).scrollTop()>n?i.addClass(l):i.removeClass(l)}),S(document.body).on("click",".sticky-product-add_to_cart_button",function(t){t.preventDefault();t=o.offset().top-132;S("html, body").animate({scrollTop:t},600)})),(r=S("#commentform")).on("click",".comment-form__attachment-button",function(){S(this).closest(".comment-form").find(".comment-form-attachment__input").trigger("click")}),r.on("change",".comment-form-attachment__input",function(t){var e=S(this).closest(".comment-form").find(".comment-form__attachment-button"),i="",i=this.files&&1<this.files.length?$minimogProductSingle.i18n.filesSelected.replace("{count}",this.files.length):t.target.value.split("\\").pop();e.find(".button-text").text(i)}),f="1"===$minimog.light_gallery_download,u="1"===$minimog.light_gallery_auto_play,y="1"===$minimog.light_gallery_zoom,_="1"===$minimog.light_gallery_full_screen,w="1"===$minimog.light_gallery_share,s={selector:"a",mode:"lg-fade",thumbnail:"1"===$minimog.light_gallery_thumbnail,download:f,autoplay:u,zoom:y,share:w,fullScreen:_,hash:!1,animateThumb:!1,showThumbByDefault:!1,getCaptionFromTitleOrAlt:!1},S(".dco-attachment-gallery").each(function(){S(this).lightGallery(s)}),f=S(".js-text-collapsible"),c=f.closest(".minimog-tabs"),new Readmore(f,{moreLink:'<a href="#" class="btn btn-flat btn-small">'+$minimogProductSingle.i18n.readMore+"</a>",lessLink:'<a href="#" class="btn btn-flat btn-small">'+$minimogProductSingle.i18n.readLess+"</a>",afterToggle:function(t,e,i){0<c.length&&c.MinimogTabPanel("updateLayout")}}),u=S("#woo-single-info .entry-summary > .variations_form"),m=u.siblings(".woobt-wrap").find(".woobt-product-this"),u.find("select").on("change",function(){var t=S(this),e=t.attr("name"),t=t.val();m.find('.variations_form select[name="'+e+'"]').val(t).trigger("change")}),S.fn.perfectScrollbar&&!C.isHandheld()&&S(".woobt-products-wrap").perfectScrollbar({suppressScrollY:!0,useBothWheelAxes:!0}),"product"===$minimog.postType){var b=$minimog.postID,y="recent_viewed_products",w=C.getCookie(y),_=b;if(""!==w){for(var v=w.split(","),k=0;k<v.length;k++)for(;v[k]==b;)v.splice(k,1);v.unshift(b),20<v.length&&v.slice(1,20),_=v.join()}C.setCookie(y,_,7)}(f=S("#live-viewing-visitors")).length<=0||({min:d,max:g,duration:u,labels:p}=f.data("settings"),h=f.find(".text"),d=parseInt(d),g=parseInt(g),setInterval(function(){var t=C.randomInteger(d,g),e=(e=1<t?p.plural:p.singular).replace("%s",'<span class="count">'+t+"</span>");h.html(e)},u)),w=S(".minimog-size-guide__table-wrapper"),S.fn.perfectScrollbar&&0<w.length&&w.perfectScrollbar({suppressScrollY:!0,useBothWheelAxes:!0}),S(document.body).on("click","#product-share-url",function(){var t=S(this).parent();C.copyToClipboard(S(this).val())&&t.attr("aria-label",t.attr("data-copied")),setTimeout(function(){t.attr("aria-label",t.attr("data-copy"))},2e3)}),$.on("isw_selected",T),S(".minimog-tabs").MinimogTabPanel(),S(document.body).on("click",".woobt-add-btn",function(t){t.preventDefault();var t="checked",e=S(this),i=e.attr("data-pid"),i=e.parents(".woobt-images").siblings(".woobt-products").find('.woobt-product[data-pid="'+i+'"]').find(".woobt-checkbox"),o=e.hasClass(t);e.toggleClass(t),i.prop("checked",!o),i.trigger("change")}),S(document.body).on("change",".woobt-layout-separate .woobt-checkbox",function(){var t=S(this),e=t.closest(".woobt-product"),i=e.data("pid"),t=t.prop("checked"),e=e.parents(".woobt-products").siblings(".woobt-images").find(".woobt-image-"+i).find(".woobt-add-btn");t?e.addClass("checked"):e.removeClass("checked")}),S(document.body).on("click",".btn-open-product-360",function(t){t.preventDefault();var t=S('<div id="modal-product-360"></div>'),i=S.extend({},{sense:-1,responsive:!0,animate:!1,plugins:["360","wheel","drag"]},S(this).data("spritespin-settings"));$.append(t),t.MinimogModal({dynamic:!0,afterInit:function(t){var t=t.$el.find(".modal-content-inner"),e=S('<div id="product-360-spritespin"></div>');t.append(e),e.spritespin(i)}})})})}(jQuery);