jQuery(document).ready((function(c){"use strict";function e(c){for(var e=c+"=",r=decodeURIComponent(document.cookie).split(";"),t=0;t<r.length;t++){for(var o=r[t];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}c(document.body).on("updated_checkout",(function(e,r){void 0!==r&&r.hasOwnProperty("wmc_update_checkout")&&r.wmc_update_checkout&&c(document.body).trigger("update_checkout")})),c(document.body).on("payment_method_selected",(function(e,r){"ppcp-gateway"===c('.woocommerce-checkout input[name="payment_method"]:checked').val()&&c(document.body).trigger("update_checkout")})),window.woocommerce_multi_currency={init:function(){this.design(),this.checkPosition(),this.click_to_expand(),"1"===wooMultiCurrencyParams.enableCacheCompatible?(this.cacheCompatible(),c(document).on("append.infiniteScroll",(()=>{this.cacheCompatible()}))):"2"===wooMultiCurrencyParams.enableCacheCompatible&&(this.overrideSwitcher(),this.cacheCompatibleByJSON(),c(document).on("append.infiniteScroll",(()=>{this.cacheCompatibleByJSON()})))},disableCurrentCurrencyLink(){c(".wmc-active a").on("click",(function(c){c.preventDefault(),c.stopImmediatePropagation()}))},design:function(){jQuery(window).width()<=768?jQuery(".woocommerce-multi-currency.wmc-sidebar").on("click",(function(){jQuery(this).toggleClass("wmc-hover"),jQuery(this).hasClass("wmc-hover")?jQuery("html").css({overflow:"hidden"}):jQuery("html").css({overflow:"visible"})})):(jQuery(".woocommerce-multi-currency.wmc-sidebar").on("mouseenter",(function(){jQuery(this).addClass("wmc-hover")})),jQuery(".woocommerce-multi-currency.wmc-sidebar").on("mouseleave",(function(){jQuery(this).removeClass("wmc-hover")})))},checkPosition:function(){jQuery(".woocommerce-multi-currency .wmc-currency-wrapper").on("mouseenter",(function(){let e=c(this).closest(".woocommerce-multi-currency");e.hasClass("wmc-currency-trigger-click")||(this.getBoundingClientRect().top/c(window).height()>.5?e.find(".wmc-sub-currency").addClass("wmc-show-up"):e.find(".wmc-sub-currency").removeClass("wmc-show-up"))}))},click_to_expand(){c(document.body).on("click",(function(e){c(".wmc-currency-trigger-click-active").removeClass("wmc-currency-trigger-click-active")})),c(document.body).on("click",".wmc-currency-trigger-click",(function(e){let r=c(this);e.stopPropagation(),r.toggleClass("wmc-currency-trigger-click-active"),this.getBoundingClientRect().top/c(window).height()>.5?r.find(".wmc-sub-currency").addClass("wmc-show-up"):r.find(".wmc-sub-currency").removeClass("wmc-show-up")}))},cacheCompatible(){if("undefined"!=typeof wc_checkout_params&&1===parseInt(wc_checkout_params.is_checkout))return;let e=[],r=c(".wmc-cache-pid");r.length&&r.each((function(r,t){let o=c(t).data("wmc_product_id");o&&e.push(o)}));let t=c(".variations_form");t.length&&t.each((function(r,t){let o=c(t).data("product_variations");o.length&&o.forEach((c=>{e.push(c.variation_id)}))}));let o=c(".woocommerce-multi-currency.wmc-shortcode").not(".wmc-list-currency-rates"),a=[];o.map((function(){let e=c(this);a.push({layout:e.data("layout")?e.data("layout"):"default",flag_size:e.data("flag_size"),dropdown_icon:e.data("dropdown_icon"),custom_format:e.data("custom_format")})})),e.length&&(e=[...new Set(e)]);let n=[];c(".wmc-cache-value").each((function(e,r){n.push({price:c(r).data("price"),original_price:c(r).data("original_price"),currency:c(r).data("currency"),product_id:c(r).data("product_id"),keep_format:c(r).data("keep_format")})})),n=[...new Set(n.map(JSON.stringify))].map(JSON.parse),c.ajax({url:wooMultiCurrencyParams.ajaxUrl,type:"POST",data:{action:"wmc_get_products_price",pids:e,shortcodes:a,wmc_current_url:c(".wmc-current-url").val(),exchange:n,extra_params:wooMultiCurrencyParams.extra_params},xhrFields:{withCredentials:!0},success(e){if(e.success){let r=e.data.prices||"",t=e.data.current_currency||"",n=e.data.exchange||"";if(a.length>0&&a.length===e.data.shortcodes.length)for(let c=0;c<a.length;c++)o.eq(c).replaceWith(e.data.shortcodes[c]);if("1"!==wooMultiCurrencyParams.switchByJS&&c(".wmc-currency a").unbind(),t){c(".wmc-sidebar .wmc-currency").removeClass("wmc-active"),c(`.wmc-sidebar .wmc-currency[data-currency=${t}]`).addClass("wmc-active"),c(".wmc-price-switcher .wmc-current-currency i").removeClass().addClass("vi-flag-64 flag-"+e.data.current_country),c(".wmc-price-switcher .wmc-hidden").removeClass("wmc-hidden"),c(`.wmc-price-switcher .wmc-currency[data-currency=${t}]`).addClass("wmc-hidden");let r=c(".wmc-price-switcher").not(".wmc-approximate-price-switcher");r.find(".wmc-current-currency i").removeClass().addClass("vi-flag-64 flag-"+e.data.current_country),r.find(".wmc-hidden").removeClass("wmc-hidden"),r.find(`.wmc-currency[data-currency=${t}]`).addClass("wmc-hidden"),c(`select.wmc-nav option[data-currency=${t}]`).prop("selected",!0),c("body").removeClass(`woocommerce-multi-currency-${wooMultiCurrencyParams.current_currency}`).addClass(`woocommerce-multi-currency-${t}`)}if(r){c(".wmc-approximately").remove();for(let e in r)c(`.wmc-cache-pid[data-wmc_product_id=${e}]`).replaceWith(r[e]);c(".variations_form").each(((e,t)=>{let o=c(t).data("product_variations");o&&(o.map((c=>{let e=c.variation_id;return c.price_html=r[e],c})),c(t).data("product_variations",o))}))}if(n)for(let e in n)c(`.wmc-cache-value[data-price="${n[e].price}"][data-product_id="${n[e].product_id}"][data-keep_format="${n[e].keep_format}"][data-original_price="${n[e].original_price}"][data-currency="${n[e].currency}"]`).replaceWith(n[e].shortcode);jQuery(document.body).trigger("wmc_cache_compatible_finish",[e.data])}}})},overrideSwitcher(){let r=e("wmc_current_currency");if(r){c(".wmc-list-currencies .wmc-currency").removeClass("wmc-active"),c(`.wmc-list-currencies .wmc-currency[data-currency=${r}]`).addClass("wmc-active"),c(".woocommerce-multi-currency.wmc-shortcode.plain-horizontal .wmc-currency").removeClass("wmc-active"),c(`.woocommerce-multi-currency.wmc-shortcode.plain-horizontal .wmc-currency a[data-currency=${r}]`).parent().addClass("wmc-active"),c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical .wmc-currency").removeClass("wmc-hidden"),c(`.woocommerce-multi-currency.wmc-shortcode.plain-vertical .wmc-currency a[data-currency=${r}]`).parent().addClass("wmc-hidden"),c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout0 .wmc-current-currency-code").text(r);{let e=c(`.woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout4 .wmc-currency a[data-currency=${r}] i`).attr("class");c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout4 .wmc-current-currency i.wmc-current-flag").removeClass().addClass(e)}{let e=c(`.woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout5 .wmc-currency a[data-currency=${r}] i`).attr("class");c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout5 .wmc-current-currency i.wmc-current-flag").removeClass().addClass(e);let t=c(`.woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout5 .wmc-currency a[data-currency=${r}] .wmc-sub-currency-code`).first().text();c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout5 .wmc-current-currency .wmc-current-currency-code").text(t)}c(".woocommerce-multi-currency.wmc-shortcode.plain-horizontal.layout6 .wmc-currency").removeClass("wmc-active"),c(`.woocommerce-multi-currency.wmc-shortcode.plain-horizontal.layout6 .wmc-currency a[data-currency=${r}]`).parent().addClass("wmc-active");{let e=c(`.woocommerce-multi-currency.wmc-shortcode.plain-vertical.vertical-currency-symbols .wmc-currency a[data-currency=${r}]`).first().text();c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical.vertical-currency-symbols .wmc-current-currency .wmc-current-currency-symbol").text(e)}{let e=c(`.woocommerce-multi-currency.wmc-shortcode.vertical-currency-symbols-circle .wmc-currency a[data-currency=${r}]`).first().text();c(".woocommerce-multi-currency.wmc-shortcode.vertical-currency-symbols-circle .wmc-current-currency").text(e)}{let e=!0;c(".woocommerce-multi-currency.wmc-shortcode.layout9 .wmc-currency").removeClass("wmc-current-currency wmc-active wmc-left wmc-right"),c(".woocommerce-multi-currency.wmc-shortcode.layout9 .wmc-currency").each((function(t,o){let a=c(o).find("a"),n=a.attr("data-currency"),m=a.text();m=m.replace(n,"").trim(),r===n?(c(o).css("z-index",999),c(o).addClass("wmc-current-currency wmc-active"),a.text(`${r} ${m}`),e=!1):(a.text(m),e?(c(o).addClass("wmc-left"),c(o).css("z-index",t)):(c(o).addClass("wmc-right"),c(o).css("z-index",99-t)))}))}{let e=c(`.woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10 .wmc-currency a[data-currency=${r}] i`).attr("class");if(c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10 .wmc-current-currency i.wmc-current-flag").removeClass().addClass(e),c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10").data("custom_format")){let e=c(`.woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10 .wmc-currency a[data-currency=${r}] .wmc-sub-currency-name`).first().text(),t=c(`.woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10 .wmc-currency a[data-currency=${r}] .wmc-sub-currency-code`).first().text(),o=c(`.woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10 .wmc-currency a[data-currency=${r}] .wmc-sub-currency-symbol`).first().text();c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10 .wmc-current-currency .wmc-currency-name").text(`${e}`),c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10 .wmc-current-currency .wmc-currency-code").text(`${t}`),c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10 .wmc-current-currency .wmc-currency-symbol").text(` ${o}`)}else{let e=c(`.woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10 .wmc-currency a[data-currency=${r}] .wmc-sub-currency-name`).first().text(),t=c(`.woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10 .wmc-currency a[data-currency=${r}] .wmc-sub-currency-symbol`).first().text();c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10 .wmc-current-currency .wmc-text-currency-text").html(`(${e})`),c(".woocommerce-multi-currency.wmc-shortcode.plain-vertical.layout10 .wmc-current-currency .wmc-text-currency-symbol").html(` ${t}`)}}c("select.wmc-nav").val(r);{c(".wmc-price-switcher .wmc-currency.wmc-hidden").removeClass("wmc-hidden"),c(`.wmc-price-switcher .wmc-currency[data-currency=${r}]`).addClass("wmc-hidden");let e=c(`.wmc-price-switcher .wmc-currency[data-currency=${r}] i`).attr("class");c(".wmc-price-switcher .wmc-current-currency i").removeClass().addClass(e)}}},cacheCompatibleByJSON(){let r=e("wmc_current_currency");function t(){c(".wmc-wc-price").each((function(e,t){let o=c(t).find(".wmc-price-cache-list").attr("data-wmc_price_cache");if(o)try{o=JSON.parse(o);let e=o[r];e&&(c(t).after(e),c(t).remove())}catch(c){}}))}r?(t(),c(".variations_form").on("show_variation",(function(){t()}))):setTimeout((function(){woocommerce_multi_currency.cacheCompatibleByJSON()}),1e3)}},woocommerce_multi_currency.init()}));