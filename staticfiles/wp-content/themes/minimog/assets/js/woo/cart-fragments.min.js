jQuery(function(i){if("undefined"==typeof wc_cart_fragments_params)return!1;var t=!0,c=wc_cart_fragments_params.cart_hash_key;try{t="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wc","test"),window.sessionStorage.removeItem("wc"),window.localStorage.setItem("wc","test"),window.localStorage.removeItem("wc")}catch(e){t=!1}function n(){t&&sessionStorage.setItem("wc_cart_created",(new Date).getTime())}function a(e){t&&(localStorage.setItem(c,e),sessionStorage.setItem(c,e))}var _,e={url:wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),type:"POST",data:{time:(new Date).getTime()},timeout:wc_cart_fragments_params.request_timeout,success:function(e){e&&e.fragments&&(i.each(e.fragments,function(e,t){i(e).replaceWith(t)}),t&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(e.fragments)),a(e.cart_hash),e.cart_hash)&&n(),i(document.body).trigger("wc_fragments_refreshed"))},error:function(){i(document.body).trigger("wc_fragments_ajax_error")}};function g(){i.ajax(e)}function r(r=!0){try{var e=JSON.parse(sessionStorage.getItem(wc_cart_fragments_params.fragment_name)),t=sessionStorage.getItem(c),o=Cookies.get("woocommerce_cart_hash"),n=sessionStorage.getItem("wc_cart_created");if(null!=o&&""!==o||(o=""),(t=null!=t&&""!==t?t:"")&&(null==n||""===n))throw"No cart_created";if(n){var a=+n+864e5,s=(new Date).getTime();if(a<s)throw"Fragment expired";_=setTimeout(g,a-s)}if(!e||!e["div.widget_shopping_cart_content"]||t!==o)throw"No fragment";i.each(e,function(e,t){if(!r&&"div.widget_shopping_cart_content"===e)return!0;i(e).replaceWith(t)}),i(document.body).trigger("wc_fragments_loaded")}catch(e){g()}}t?(_=null,i(document.body).on("wc_fragment_refresh updated_wc_div",function(){g()}),i(document.body).on("added_to_cart removed_from_cart",function(e,t,r){var o=sessionStorage.getItem(c);null!=o&&""!==o||n(),delete t[".woocommerce-notices-wrapper"],delete t[".fly-cart-messages"],sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(t)),a(r)}),i(document.body).on("wc_fragments_refreshed",function(){clearTimeout(_),_=setTimeout(g,864e5)}),i(window).on("storage onstorage",function(e){c===e.originalEvent.key&&localStorage.getItem(c)!==sessionStorage.getItem(c)&&g()}),i(window).on("pageshow",function(e){e.originalEvent.persisted&&(i(".widget_shopping_cart_content").empty(),i(document.body).trigger("wc_fragment_refresh"))}),r(!1),i(document.body).on("minimog_fly_cart_first_open",function(){r(!0)})):g(),0<Cookies.get("woocommerce_items_in_cart")?i(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show():i(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").hide(),i(document.body).on("adding_to_cart",function(){i(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show()}),"undefined"!=typeof wp&&wp.customize&&wp.customize.selectiveRefresh&&wp.customize.widgetsPreview&&wp.customize.widgetsPreview.WidgetPartial&&wp.customize.selectiveRefresh.bind("partial-content-rendered",function(){g()})});