!function(r){"use strict";var i=window.minimog.Helpers,a=r("#cart-table-wrap");r(document).ready(function(){var t;a.on("change",".qty",function(){var o=r(this);o.get(0).reportValidity()&&(void 0!==t&&clearTimeout(t),t=setTimeout(function(){var e,a,t=o.attr("name"),n=o.val();t={cart_item_key:e=t,cart_item_qty:a=n,security:$minimog.nonce},r.ajax({url:$minimogWoo.wc_ajax_url.toString().replace("%%endpoint%%","minimog_update_product_quantity"),type:"POST",cache:!1,dataType:"json",data:t,beforeSend:function(){i.setBodyHandling()},error:function(){i.setBodyCompleted()},success:function(t){t.data&&t.data.fragments&&r.each(t.data.fragments,function(t,e){r(t).replaceWith(e)}),r(document.body).trigger("minimog_update_qty",[e,a]),r(document.body).trigger("wc_fragment_refresh")}})},500))})}),r(document.body).on("wc_fragments_loaded wc_fragments_refreshed",function(){i.handleLazyImages(a),i.setBodyCompleted()}),r("#modal-cart-order-notes").on("submit","form",function(){var t=r(this),e=t.find("button[type=submit]"),a=r(this).find('textarea[name="order_comments"]').val(),n={order_notes:a};return r.ajax({type:"POST",url:$minimogWoo.wc_ajax_url.toString().replace("%%endpoint%%","minimog_save_order_notes"),data:n,dataType:"json",success:function(t){t.data&&t.data.fragments&&r.each(t.data.fragments,function(t,e){r(t).replaceWith(e)}),r('textarea[name="order_comments"]').val(a)},beforeSend:function(){i.setElementHandling(e)},complete:function(){i.unsetElementHandling(e),t.closest(".minimog-modal").MinimogModal("close")}}),!1}),r(document).on("submit","form.fly-cart-shipping-calculator",function(t){t.preventDefault();var e=r(t.currentTarget);r.ajax({type:e.attr("method"),url:$minimogWoo.wc_ajax_url.toString().replace("%%endpoint%%","minimog_calculate_shipping"),data:e.serialize(),dataType:"json",success:function(t){t.data.fragments&&r.each(t.data.fragments,function(t,e){r(t).empty(),""!==e&&(e=r(r.parseHTML(e)),r(t).html(e.html()))})},beforeSend:function(){e.closest(".minimog-modal").MinimogModal("close"),i.setBodyHandling()},complete:function(){i.setBodyCompleted()}})}),r(document).on("click",".btn-remove-from-cart",function(t){var e;"undefined"!=typeof wc_add_to_cart_params&&(t.preventDefault(),e=r(this),r.ajax({type:"POST",url:i.getAjaxUrl("remove_from_cart"),data:{cart_item_key:e.data("cart_item_key")},dataType:"json",beforeSend:function(){i.setBodyHandling()},success:function(t){t&&t.fragments?(t.output&&r.each(t.output,function(t,e){r(t).replaceWith(e)}),r(document.body).trigger("removed_from_cart",[t.fragments,t.cart_hash,e]),i.setBodyCompleted(),i.handleLazyImages(a)):window.location=e.attr("href")},error:function(){window.location=e.attr("href")}}))})}(jQuery);